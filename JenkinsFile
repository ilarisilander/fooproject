pipeline {
    env.UNIX = isUnix()
    agent any
    stages {
        stage('Checkout') {
            steps {
                git 'https://github.com/ilarisilander/fooproject'
                
            }
        }
        stage('Build') {
            steps {
                if(Boolean.valueOf(env.UNIX)) {
                    sh "mvn compile"
                }
                else{
                    bat "mvn compile"
                }
            }
        }
        stage('Test') {
            steps {
                if(Boolean.valueOf(env.UNIX)) {
                    sh "mvn compile"
                 }
                 else{
                    bat "mvn compile"
                 }
            }
            post {
                always {
                    junit '**/TEST*.xml'
                }
            }
            
        }
        
    }
}